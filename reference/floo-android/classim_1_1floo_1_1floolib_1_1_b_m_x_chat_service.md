---
title: im::floo::floolib::BMXChatService
summary: Chat Service 

---

# im::floo::floolib::BMXChatService



Chat Service 

## Public Functions

|                | Name           |
| -------------- | -------------- |
| synchronized void | **[delete](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-delete)**() |
| void | **[sendMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-sendmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send a message, and the message status change is notified via listener  |
| void | **[resendMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-resendmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Resend this message, and the message status change is notified via listener  |
| void | **[recallMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-recallmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Recall a message, and the message status change is notified via listener  |
| [BMXErrorCode] | **[forwardMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-forwardmessage)**(BMXMessageList list, [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) to, [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) newMsg)<br>Merge forwarding messages  |
| void | **[forwardMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-forwardmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Simple forwarding messages, users should create forwarding messages first through BMXMessage:: createForwardMessage ()  |
| void | **[ackMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-ackmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send read receipt  |
| void | **[ackMessageDelivered](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-ackmessagedelivered)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send delivery receipt  |
| void | **[ackPlayMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-ackplaymessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send a playback receipt  |
| void | **[readCancel](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-readcancel)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Mark this message as unread and synchronize to all devices of the current user  |
| void | **[readAllMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-readallmessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Mark this message and all previous messages as read, and synchronize to all current users' devices  |
| void | **[removeMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-removemessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, boolean synchronize)<br>Delete this message, which synchronizes to other devices of the current user  |
| void | **[removeMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-removemessage)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg) |
| void | **[downloadThumbnail](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-downloadthumbnail)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, BMXChatService.ThumbnailStrategy strategy)<br>Download thumbnail, downloading state changes and progress notified via listener. Thumbnail generation policy: 1 - generated by third-party server, 2 - generated by local server, default 1.  |
| void | **[downloadThumbnail](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-downloadthumbnail)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg) |
| void | **[downloadAttachment](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-downloadattachment)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Downloaded attachments, and download state changes and progress are notified via listener  |
| void | **[downloadAttachmentByUrl](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-downloadattachmentbyurl)**(long msgId, String url, String path)<br>Downloaded attachments, and download state changes and progress are notified via listener  |
| void | **[cancelUploadAttachment](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-canceluploadattachment)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Cancel uploading attachment  |
| void | **[cancelDownloadAttachment](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-canceldownloadattachment)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Cancel uploading attachment  |
| int | **[transferingNum](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-transferingnum)**()<br>Number of uploading/downloading files  |
| [BMXErrorCode] | **[insertMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-insertmessages)**(BMXMessageList list)<br>Insert a message  |
| [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) | **[getMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getmessage)**(long msgId)<br>Read a message  |
| void | **[deleteConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-deleteconversation)**(long conversationId, boolean synchronize)<br>Delete session  |
| void | **[deleteConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-deleteconversation)**(long conversationId) |
| [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) | **[openConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-openconversation)**(long conversationId, BMXConversation.Type type, boolean createIfNotExist)<br>Launch a session  |
| [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) | **[openConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-openconversation)**(long conversationId, BMXConversation.Type type) |
| String | **[attachmentDir](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-attachmentdir)**()<br>Get attachment saving path  |
| String | **[attachmentDirForConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-attachmentdirforconversation)**(long conversationId)<br>Get attachment saving path for a session  |
| BMXConversationList | **[getAllConversations](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getallconversations)**()<br>Get all sessions  |
| int | **[getAllConversationsUnreadCount](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getallconversationsunreadcount)**()<br>Get unread-number for all sessions (unreads for individuals and groups marked as blocked is not counted)  |
| [BMXErrorCode] | **[retrieveHistoryMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-retrievehistorymessages)**([BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) conversation, long refMsgId, long size, BMXMessageList result)<br>Pull message history  |
| [BMXErrorCode] | **[searchMessagesByKeyWords](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-searchmessagesbykeywords)**(String keywords, long refTime, long size, BMXMessageListList result, BMXConversation.Direction arg4)<br>Search for messages  |
| [BMXErrorCode] | **[searchMessagesByKeyWords](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-searchmessagesbykeywords)**(String keywords, long refTime, long size, BMXMessageListList result) |
| [BMXErrorCode] | **[searchMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-searchmessages)**(String keywords, long refTime, long size, BMXMessageListList result, BMXConversation.Direction arg4)<br>Search for messages  |
| [BMXErrorCode] | **[searchMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-searchmessages)**(String keywords, long refTime, long size, BMXMessageListList result) |
| [BMXErrorCode] | **[getGroupAckMessageUserIdList](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getgroupackmessageuseridlist)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, ListOfLongLong groupMemberIdList)<br>Get the list of user-ids that have read group messages  |
| [BMXErrorCode] | **[getGroupAckMessageUnreadUserIdList](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getgroupackmessageunreaduseridlist)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, ListOfLongLong groupMemberIdList)<br>Get a list of unread user ids for the sent group message  |
| [BMXErrorCode] | **[getGroupPlayAckMessageUserIdList](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getgroupplayackmessageuseridlist)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, ListOfLongLong groupMemberIdList)<br>Get a list of playback user ids for the sent group message  |
| [BMXErrorCode] | **[getGroupUnPlayAckMessageUserIdList](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getgroupunplayackmessageuseridlist)**([BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, ListOfLongLong groupMemberIdList)<br>Get a list of unplayed user ids for the sent group message  |
| void | **[addChatListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-addchatlistener)**([BMXChatServiceListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.md) listener)<br>Add chat listener  |
| void | **[removeChatListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-removechatlistener)**([BMXChatServiceListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.md) listener)<br>Remove chat listener  |

## Protected Functions

|                | Name           |
| -------------- | -------------- |
| | **[BMXChatService](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-bmxchatservice)**(long cPtr, boolean cMemoryOwn) |
| void | **[finalize](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-finalize)**() |
| long | **[getCPtr](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#function-getcptr)**([BMXChatService](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md) obj) |

## Protected Attributes

|                | Name           |
| -------------- | -------------- |
| transient boolean | **[swigCMemOwn](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md#variable-swigcmemown)**  |

## Public Functions Documentation

### function delete

```java
inline synchronized void delete()
```


### function sendMessage

```java
inline void sendMessage(
    BMXMessage msg
)
```

Send a message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Sent message 


### function resendMessage

```java
inline void resendMessage(
    BMXMessage msg
)
```

Resend this message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Resent message 


### function recallMessage

```java
inline void recallMessage(
    BMXMessage msg
)
```

Recall a message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Recalled message 


### function forwardMessage

```java
inline BMXErrorCode forwardMessage(
    BMXMessageList list,
    BMXConversation to,
    BMXMessage newMsg
)
```

Merge forwarding messages 

**Parameters**: 

  * **list** List of forwarded messages 
  * **to** The session to which message is forwarded 
  * **newMsg** The newly generated single forwarded message from the merging list of forwarded messages 


**Return**: [BMXErrorCode]

### function forwardMessage

```java
inline void forwardMessage(
    BMXMessage msg
)
```

Simple forwarding messages, users should create forwarding messages first through BMXMessage:: createForwardMessage () 

**Parameters**: 

  * **msg** Forwarded message 


### function ackMessage

```java
inline void ackMessage(
    BMXMessage msg
)
```

Send read receipt 

**Parameters**: 

  * **msg** Message requiring a read receipt to be sent 


### function ackMessageDelivered

```java
inline void ackMessageDelivered(
    BMXMessage msg
)
```

Send delivery receipt 

**Parameters**: 

  * **msg** Message that need to send a delivery receipt 


### function ackPlayMessage

```java
inline void ackPlayMessage(
    BMXMessage msg
)
```

Send a playback receipt 

**Parameters**: 

  * **msg** Messages that require to send a playback receipt 


### function readCancel

```java
inline void readCancel(
    BMXMessage msg
)
```

Mark this message as unread and synchronize to all devices of the current user 

**Parameters**: 

  * **msg** The message needs to send “read recalled” 


### function readAllMessage

```java
inline void readAllMessage(
    BMXMessage msg
)
```

Mark this message and all previous messages as read, and synchronize to all current users' devices 

**Parameters**: 

  * **msg** The message for which all earlier messages need to be marked as read 


### function removeMessage

```java
inline void removeMessage(
    BMXMessage msg,
    boolean synchronize
)
```

Delete this message, which synchronizes to other devices of the current user 

**Parameters**: 

  * **msg** Message to be deleted 
  * **synchronize** Whether to synchronize to other devices, otherwise only the locally stored message will be deleted 


### function removeMessage

```java
inline void removeMessage(
    BMXMessage msg
)
```


### function downloadThumbnail

```java
inline void downloadThumbnail(
    BMXMessage msg,
    BMXChatService.ThumbnailStrategy strategy
)
```

Download thumbnail, downloading state changes and progress notified via listener. Thumbnail generation policy: 1 - generated by third-party server, 2 - generated by local server, default 1. 

**Parameters**: 

  * **msg** Message requiring to download thumbnail 
  * **strategy** Thumbnail generation policy, 1 - generated by third-party server, 2 - Generated by local server, default 1. 


### function downloadThumbnail

```java
inline void downloadThumbnail(
    BMXMessage msg
)
```


### function downloadAttachment

```java
inline void downloadAttachment(
    BMXMessage msg
)
```

Downloaded attachments, and download state changes and progress are notified via listener 

**Parameters**: 

  * **msg** Message requiring to download attachment 


### function downloadAttachmentByUrl

```java
inline void downloadAttachmentByUrl(
    long msgId,
    String url,
    String path
)
```

Downloaded attachments, and download state changes and progress are notified via listener 

**Parameters**: 

  * **msgId** Message requiring to download attachment 
  * **url** File remote address 
  * **path** File local address 


### function cancelUploadAttachment

```java
inline void cancelUploadAttachment(
    BMXMessage msg
)
```

Cancel uploading attachment 

**Parameters**: 

  * **msg** Message requiring to cancel attachment uploading 


### function cancelDownloadAttachment

```java
inline void cancelDownloadAttachment(
    BMXMessage msg
)
```

Cancel uploading attachment 

**Parameters**: 

  * **msg** Message requiring to cancel attachment uploading 


### function transferingNum

```java
inline int transferingNum()
```

Number of uploading/downloading files 

**Return**: Number of files 

### function insertMessages

```java
inline BMXErrorCode insertMessages(
    BMXMessageList list
)
```

Insert a message 

**Parameters**: 

  * **list** Insert message list 


**Return**: [BMXErrorCode]

### function getMessage

```java
inline BMXMessage getMessage(
    long msgId
)
```

Read a message 

**Parameters**: 

  * **msgId** id of the message which needs to be fetched 


**Return**: [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md)

### function deleteConversation

```java
inline void deleteConversation(
    long conversationId,
    boolean synchronize
)
```

Delete session 

**Parameters**: 

  * **conversationId** Session id requiring to delete session 
  * **synchronize** Whether to delete the session on other devices synchronously, default false, means only delete the session on the current device 


### function deleteConversation

```java
inline void deleteConversation(
    long conversationId
)
```


### function openConversation

```java
inline BMXConversation openConversation(
    long conversationId,
    BMXConversation.Type type,
    boolean createIfNotExist
)
```

Launch a session 

**Parameters**: 

  * **conversationId** id of the session which needs to be opened 
  * **type** Session type, single/group chat. 
  * **createIfNotExist** Whether to create a local session if no session existing, default to create 


**Return**: [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md)

### function openConversation

```java
inline BMXConversation openConversation(
    long conversationId,
    BMXConversation.Type type
)
```


### function attachmentDir

```java
inline String attachmentDir()
```

Get attachment saving path 

**Return**: std::string 

### function attachmentDirForConversation

```java
inline String attachmentDirForConversation(
    long conversationId
)
```

Get attachment saving path for a session 

**Parameters**: 

  * **conversationId** Session id requiring a session attachment path 


**Return**: std::string 

### function getAllConversations

```java
inline BMXConversationList getAllConversations()
```

Get all sessions 

**Return**: BMXConversationList 

### function getAllConversationsUnreadCount

```java
inline int getAllConversationsUnreadCount()
```

Get unread-number for all sessions (unreads for individuals and groups marked as blocked is not counted) 

**Return**: int 

### function retrieveHistoryMessages

```java
inline BMXErrorCode retrieveHistoryMessages(
    BMXConversation conversation,
    long refMsgId,
    long size,
    BMXMessageList result
)
```

Pull message history 

**Parameters**: 

  * **conversation** Session for which message history needs to pull 
  * **refMsgId** Start message Id for pulling session messages 
  * **size** Maximum number of messages to pull 
  * **result** List of messages fetched by pull operation, externally initializing an incoming empty list. 


**Return**: [BMXErrorCode]

### function searchMessagesByKeyWords

```java
inline BMXErrorCode searchMessagesByKeyWords(
    String keywords,
    long refTime,
    long size,
    BMXMessageListList result,
    BMXConversation.Direction arg4
)
```

Search for messages 

**Parameters**: 

  * **keywords** Keyword for search 
  * **refTime** Start time of message search 
  * **size** Maximum number of messages to search 
  * **result** List of searched message results, externally initializing an incoming empty list. 
  * **arg4** Message search direction, default (Direction::Up)means search from earlier messages. 


**Return**: [BMXErrorCode]

### function searchMessagesByKeyWords

```java
inline BMXErrorCode searchMessagesByKeyWords(
    String keywords,
    long refTime,
    long size,
    BMXMessageListList result
)
```


### function searchMessages

```java
inline BMXErrorCode searchMessages(
    String keywords,
    long refTime,
    long size,
    BMXMessageListList result,
    BMXConversation.Direction arg4
)
```

Search for messages 

**Parameters**: 

  * **keywords** Keyword for search 
  * **refTime** Start time of message search 
  * **size** Maximum number of messages to search 
  * **result** List of searched message results, externally initializing an incoming empty list. 
  * **arg4** Message search direction, default (Direction::Up)means search from earlier messages. 


**Return**: [BMXErrorCode]

### function searchMessages

```java
inline BMXErrorCode searchMessages(
    String keywords,
    long refTime,
    long size,
    BMXMessageListList result
)
```


### function getGroupAckMessageUserIdList

```java
inline BMXErrorCode getGroupAckMessageUserIdList(
    BMXMessage msg,
    ListOfLongLong groupMemberIdList
)
```

Get the list of user-ids that have read group messages 

**Parameters**: 

  * **msg** Message requiring to get list of read user ids 
  * **groupMemberIdList** List of read user ids for this message, initially passed in as an empty list 


**Return**: [BMXErrorCode]

### function getGroupAckMessageUnreadUserIdList

```java
inline BMXErrorCode getGroupAckMessageUnreadUserIdList(
    BMXMessage msg,
    ListOfLongLong groupMemberIdList
)
```

Get a list of unread user ids for the sent group message 

**Parameters**: 

  * **msg** Message requiring to get list of unread user ids 
  * **groupMemberIdList** List of unread user ids for this message, initially passed in as an empty list 


**Return**: [BMXErrorCode]

### function getGroupPlayAckMessageUserIdList

```java
inline BMXErrorCode getGroupPlayAckMessageUserIdList(
    BMXMessage msg,
    ListOfLongLong groupMemberIdList
)
```

Get a list of playback user ids for the sent group message 

**Parameters**: 

  * **msg** Message requiring to get list of played user ids 
  * **groupMemberIdList** List of played user ids for this message, initially passed in as an empty list 


**Return**: [BMXErrorCode]

### function getGroupUnPlayAckMessageUserIdList

```java
inline BMXErrorCode getGroupUnPlayAckMessageUserIdList(
    BMXMessage msg,
    ListOfLongLong groupMemberIdList
)
```

Get a list of unplayed user ids for the sent group message 

**Parameters**: 

  * **msg** Message requiring to get list of unplayed user ids 
  * **groupMemberIdList** List of unplayed user ids for this message, initially passed in as an empty list 


**Return**: [BMXErrorCode]

### function addChatListener

```java
inline void addChatListener(
    BMXChatServiceListener listener
)
```

Add chat listener 

**Parameters**: 

  * **listener** Chat listener 


### function removeChatListener

```java
inline void removeChatListener(
    BMXChatServiceListener listener
)
```

Remove chat listener 

**Parameters**: 

  * **listener** Chat listener 


## Protected Functions Documentation

### function BMXChatService

```java
inline BMXChatService(
    long cPtr,
    boolean cMemoryOwn
)
```


### function finalize

```java
inline void finalize()
```


### function getCPtr

```java
static inline long getCPtr(
    BMXChatService obj
)
```


## Protected Attributes Documentation

### variable swigCMemOwn

```java
transient boolean swigCMemOwn;
```


-------------------------------

Updated on 2022-01-26 at 17:18:31 +0800